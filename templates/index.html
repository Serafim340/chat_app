<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Join Chat Room</title>
  <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body class="index-body">
  <h1>Join a Chat Room</h1>

  <form id="joinForm" action="/chat" method="get">
    <input type="text" name="nick" placeholder="Enter nickname…" required />

    <input type="text" name="room" placeholder="Enter room name…" required id="roomInput">

    <select id="existingRooms">
      <option value="">— or choose existing —</option>
    </select>

    <button type="submit">Join</button>
  </form>

  <script>
    const roomInput = document.getElementById("roomInput");
    const existing = document.getElementById("existingRooms");

    // Подгружаем существующие комнаты
    fetch("/rooms")
      .then(r => r.json())
      .then(list => {
        list.forEach(name => {
          const o = document.createElement("option");
          o.value = name;
          o.textContent = name;
          existing.appendChild(o);
        });
      });

    // При выборе комнаты из списка, подставляем в input
    existing.addEventListener("change", () => {
      if (existing.value) {
        roomInput.value = existing.value;
      }
    });
  </script>
</body>
</html>
